@import "tailwindcss";

/* =========================
   Base（配色・タイポ・モバイル最適化）
   ========================= */
@layer base {
  :root {
    color-scheme: dark;

    /* テーマ変数（青＝未来モードをデフォルト） */
    --bg: #000000;
    --fg: #ffffff;
    --panel: rgba(255,255,255,0.05);
    --border: rgba(255,255,255,0.10);

    --accent: #4fc3ff; /* 未来モード(青) */
    --accent-shadow: 0 0 10px #4fc3ff, 0 0 20px #4fc3ff;
    --accent-shadow-strong: 0 0 20px #4fc3ff, 0 0 40px #4fc3ff;
  }

  /* 情熱モード(ピンク) */
  :root[data-mode="pink"] {
    --accent: #ff4fdf;
    --accent-shadow: 0 0 10px #ff4fdf, 0 0 20px #ff4fdf;
    --accent-shadow-strong: 0 0 20px #ff4fdf, 0 0 40px #ff4fdf;
  }

  html { 
    -webkit-text-size-adjust: 100%;
    scroll-behavior: smooth;
    height: 100%;
  }
  body { 
    height: 100%;
    background: var(--bg);
    color: var(--fg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  a { 
    color: inherit; 
    text-decoration: none; 
    -webkit-tap-highlight-color: transparent;
  }
  button, input, textarea, select {
    -webkit-appearance: none;
    appearance: none;
    background: none;
    border-radius: 0;
    color: inherit;
    font: inherit;
  }
  * { -webkit-touch-callout: none; }
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  select:-webkit-autofill {
    -webkit-text-fill-color: #fff;
    -webkit-box-shadow: 0 0 0px 1000px #0a0a0a inset;
    transition: background-color 9999s ease-in-out 0s;
  }
  ::-webkit-scrollbar { width:10px; height:10px; }
  ::-webkit-scrollbar-thumb { background: rgba(255,255,255,.12); border-radius:9999px; }
  ::-webkit-scrollbar-track { background: rgba(255,255,255,.04); }

  /* キーボード操作の視認性向上 */
  :focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }
}

/* =========================
   Components（フォーム・ボタン）
   ========================= */
@layer components {
  .form-field { 
    @apply w-full rounded-xl bg-white/10 border border-white/20 text-white px-3 py-3 outline-none focus:ring-2 focus:ring-white/30 placeholder:text-white/40;
  }

  .btn { 
    @apply rounded-xl px-4 py-3 font-semibold bg-white/10 text-white hover:bg-white/15 border border-white/20 transition;
  }

  .btn-primary { 
    @apply text-black border-0;
    background: var(--accent);
    box-shadow: var(--accent-shadow);
  }

  /* 未来感の波紋エフェクト用：ボタンの土台 */
  .btn-ripple {
    position: relative;
    overflow: hidden;
    transform: translateZ(0); /* レイヤ促進でカクつき防止 */
  }

  /* 押下中のわずかな縮小（自然なタップ感） */
  .btn-pressable {
    transition: transform 120ms ease;
  }
  .btn-pressable:active {
    transform: scale(0.98);
  }

  /* 波紋本体（白系の光） */
  .ripple {
    position: absolute;
    border-radius: 9999px;
    pointer-events: none;
    background: radial-gradient(closest-side, rgba(255,255,255,0.35), rgba(255,255,255,0.15), transparent);
    width: 24px;
    height: 24px;
    transform: translate(-50%, -50%) scale(0);
    animation: ripple 600ms linear forwards;
    mix-blend-mode: screen; /* 光感を強める */
  }

  /* グラデーション版（ピンク→ブルーの未来光） */
  .ripple-gradient {
    background: radial-gradient(closest-side, rgba(255,79,223,0.45), rgba(79,195,255,0.35), transparent);
  }

  /* 主要ボタンに未来光の外縁 */
  .btn-glow {
    box-shadow: var(--accent-shadow-strong);
  }
}

/* =========================
   Utilities（小道具）
   ========================= */
@layer utilities {
  .no-underline { text-decoration: none !important; }
  .no-tap-highlight { -webkit-tap-highlight-color: transparent; }
  .touch-manipulation { touch-action: manipulation; }
}

/* =========================
   Animations（波紋・プリファレンス配慮）
   ========================= */
@keyframes ripple {
  0%   { transform: translate(-50%, -50%) scale(0);   opacity: 0.7; }
  80%  { transform: translate(-50%, -50%) scale(4);   opacity: 0.15; }
  100% { transform: translate(-50%, -50%) scale(5.2); opacity: 0; }
}

/* 動きを最小化設定のユーザーには穏やかに */
@media (prefers-reduced-motion: reduce) {
  .btn-pressable,
  .ripple,
  .ripple-gradient {
    transition: none !important;
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
  }
}
