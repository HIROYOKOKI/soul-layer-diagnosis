// scripts/test-supabase.ts
// âœ… .env.local ã‚’èª­ã¿è¾¼ã‚€
import "dotenv/config";
import { createClient } from "@supabase/supabase-js";

// Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
const sb = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

async function main() {
  console.log("ğŸ§© SUPABASE_URL:", process.env.SUPABASE_URL);
  console.log("ğŸ§© KEY:", process.env.SUPABASE_SERVICE_ROLE_KEY ? "[set]" : "[missing]");

  // ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰3ä»¶å–å¾—
  const { data, error } = await sb.from("profiles").select("*").limit(3);

  if (error) {
    console.error("âŒ Supabase error:", error.message);
  } else {
    console.log("âœ… Supabase OK / first 3 rows:", data);
  }
}

main();

